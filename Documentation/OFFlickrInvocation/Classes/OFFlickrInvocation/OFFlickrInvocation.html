<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>API Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css"><!--a:link {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #0000ff;}a:visited {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #0000ff;}a:visited:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}a:active {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}a:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}h4 {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: tiny; font-weight: bold;}body {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: 10pt;}--></style>
<meta name="generator" content="HeaderDoc">
</head>
<body bgcolor="#ffffff">
<h1>OFFlickrInvocation</h1>
<hr>
<p>
 An OFFlickrInvocation object makes Flickr API request.

<br><b>Superclass:</b> <!-- a logicalPath="//apple_ref/occ/cl/NSObject" -->NSObject<!-- /a --><br></p>
<p></p>
<hr>
<br><p>
 This is the class that does all the work and has all the fun.
If you want to make quick Flickr API calls, simply create an
OFFlickrInvocation object by supplying the context information
(encapsulated in an OFFlickrContext object), then make the
API call. This class is named OFFlickrInvocation as invocation is
the ObjC-speak for the action of sending a message / calling a method.
<br><br>
This being simply said, actually there are two "flavors" with 
which you can use OFFlickrInvocation. The two flavors differ in how 
API call returns are handled. Both flavors are often-found patterns in
Cocoa.
<br><br>
The first flavor is to handle API returns by the delegate. The delegate
should implement some or all of the informal protocol (specified in
OFFlickrInvocationDelegate). The drawback of this flavor is that you have
to rely on the user information, provided and retrived with 
<tt>setUserInfo:</tt> and <tt>userInfo</tt>, to tell which API call you 
have just called, and to which API the returned data block (or error code)
belongs--in short, you have to use the extra user information to tell
which state you are in.
<br><br>
The second flavor--the preferred way--is to use the callback selector.
You can set the selector by calling <tt>setSelector:</tt>, and the method
of the delegate will ba called. The method must have the following
signature:
<br><br></p>
<blockquote>
<tt>- (void)handleMethod:(OFFlickrInvocation*)caller errorCode:(int)error data:(id)data</tt>
</blockquote>
<br><br><p>
The name of the method doesn't matter. It can be called e.g.
<tt>processReturn:error:data:</tt> so long as it has the above signature
and parameter types. If the error code is zero, the data will always be
an NSXMLDocument object that is the returned data block. If not, data will
be an NSString if it's a Flickr error (with error code &gt; 0), or an NSError
or nil if it's an internal error (pleaser refer to ObjectiveFlickr.h for
shared error codes).
<br><br>
If you opt for the second flavor, two of the delegate's informal protocol
methods, <tt>flickrInvocation:didFetchData:</tt> and
<tt>flickrInvocation:errorCode:errorInfo:</tt> will be "routed" away. But
<tt>flickrInvocation:progress:expectedTotal:</tt> messages will still be
sent to the delegate.
<br><br>
As for calling Flickr methods, OFFlickrInvocation has another perk that is
not found in its interface declaration. In addition to
<tt>callMethods:arguments:</tt> or 
<tt>callMethods:arguments:delegate:selector:</tt>, you can actually 
call a Flickr method <em>as if it were an OFFlickrInvocation-natie
method</em>. For example:
<br><br></p>
<blockquote>  
<tt>[invoc flickr_photos_search:nil tags:@"flowers" text:@"flowers" selector:@selector(handleSearch:errorCode:data:)]</tt>
</blockquote>
<br><br><p>
Note the naming convention of flickr_photos_search. This is actually the
equilvalent of:
<br><br></p>
<blockquote>
<tt>
[invoc setUserInfo:nil];<br>
[invoc callMethod:@"flickr.photos.search" arguments:[NSArray arrayWithObjects:@"tags", @"flowers", @"text", @"flowers", nil] selector:@selector(handleSearch:errorCode:data:)]</tt>
</blockquote>
<br><br><p>
The translation is automatically done using an Objective-C hack. The only
problem being the compiler may warn you that
<tt>flickr_photos_search:tags:text:selector:</tt> may not exist. It's true
that it doesn't exist (it's translated on the fly), but you can have your
own informal protocol declaration (by adding a category to <tt>NSObject</tt>)
to stop the compiler from whining.

<br><br></p>
<hr>
<br><center>(Last Updated October 23, 2006)
<br><font size="-1">HTML documentation generated by <a href="http://www.opensource.apple.com/projects" target="_blank">HeaderDoc</a></font>
</center>
</body>
</html>
